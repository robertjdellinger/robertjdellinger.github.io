##########################
# Build Configuration
##########################
[build]
  command = "hugo --gc --minify"
  publish = "public"

[build.environment]
  HUGO_VERSION = "0.152.2"
  HUGO_ENV = "production"
  HUGO_ENABLEGITINFO = "true"

##########################
# Security & Performance Headers
##########################
[[headers]]
for = "/*"
  [headers.values]
  Referrer-Policy = "strict-origin-when-cross-origin"
  X-Content-Type-Options = "nosniff"
  X-Frame-Options = "DENY"
  Permissions-Policy = "geolocation=(), microphone=(), camera=()"

##########################
# Redirects
##########################
[[redirects]]
  from = "/engagement/*"
  to = "/outreach/:splat"
  status = 301
  force = true

[[redirects]]
  from = "/author/robert-j.-dellinger"
  to = "/"
  status = 301

[[redirects]]
  from = "/research/bay-lab/*"
  to = "/research/early-career/bay-lab/:splat"
  status = 301

[[redirects]]
  from = "/research/bodega-marine-lab/*"
  to = "/research/early-career/bodega-marine-lab/:splat"
  status = 301

[[redirects]]
  from = "/research/lake-atitlan/*"
  to = "/research/early-career/lake-atitlan/:splat"
  status = 301

[[redirects]]
  from = "/*"
  to = "/404.html"
  status = 404
