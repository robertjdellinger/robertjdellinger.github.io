<link rel="icon" href="{{ .Site.Params.assets.favicon | default "/favicon.ico" }}" />

<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>{{ if .Title }}{{ .Title }} | {{ end }}{{ .Site.Title }}</title>
<meta name="description" content="{{ with .Site.Params.description_long }}{{ . }}{{ else }}{{ .Site.Description }}{{ end }}">
<meta name="author" content="{{ with .Site.Params.author.name }}{{ . }}{{ else }}{{ .Site.Author }}{{ end }}">
<meta name="keywords" content="ocean acidification, climate change, marine biogeochemistry, coral reefs, UCLA, atmospheric sciences, oceanic sciences">

<meta name="theme-color" content="{{ .Site.Params.theme_color | default "#4F46E5" }}">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

{{/* Preloads: fonts/images you need immediately */}}
{{ with .Site.Params.preload_fonts }}
  {{ range . }}
<link rel="preload" href="{{ . }}" as="font" type="font/woff2" crossorigin>
  {{ end }}
{{ end }}

{{/* Open Graph (critical for social cards) */}}
<meta property="og:type" content="{{ .Site.Params.seo.open_graph.type | default "website" }}">
<meta property="og:title" content="{{ with .Title }}{{ . }}{{ else }}{{ .Site.Title }}{{ end }}">
<meta property="og:description" content="{{ with .Params.description }}{{ . }}{{ else }}{{ .Site.Params.description_long }}{{ end }}">
<meta property="og:image" content="{{ with .Params.images }}{{ index . 0 }}{{ else }}{{ .Site.Params.default_image }}{{ end }}">
<meta property="og:locale" content="{{ .Site.Params.seo.open_graph.locale | default "en_US" }}">

{{/* Twitter card */}}
<meta name="twitter:card" content="{{ .Site.Params.seo.twitter_card.card | default "summary_large_image" }}">
<meta name="twitter:site" content="{{ with .Site.Params.social.twitter.handle }}{{ printf "@%s" . }}{{ end }}">

{{/* Canonical */}}
{{ with .Permalink }}<link rel="canonical" href="{{ . }}">{{ end }}

{{/* Critical CSS: inline or linked CSS required for first paint (keep small) */}}
{{ with .Site.Params.critical_css }}
<style>{{ . | safeHTML }}</style>
{{ end }}
